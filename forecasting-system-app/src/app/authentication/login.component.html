<mat-card class="auth-card">
    <mat-card-header> <!-- Header -->
        <mat-card-title>Sign in</mat-card-title>
    </mat-card-header>

    <mat-card-content> 
        <form [formGroup]="form" (ngSubmit)="onLogin()" class="form">
        <mat-form-field appearance="fill" class="full">
            <mat-label>Email</mat-label> <!-- Email input field -->
            <input matInput type="email" formControlName="email" required/> <!-- formControlName binds the input to a specific FormControl inside the FormGroup -->
            @if (form.controls.email.hasError('required')){
                <mat-error>Email is required</mat-error> <!-- Field-level validation, shows errors raised from the form control's validators -->
            }
            @if (form.controls.email.hasError('email')){
                <mat-error>Enter a valid email</mat-error>
            }
        </mat-form-field> <!-- Password input field -->
        <mat-form-field appearance="fill" class="full">
            <mat-label>Password</mat-label>
            <input matInput [type]="hide ? 'password' : 'text'" formControlName="password" required/> <!-- Uses property binding to re-compute expression when icon button is toggled -->
            <button matIconButton matSuffix type="button" (click)="hide = !hide" [attr.aria-label]="'Hide password'" [attr.aria-pressed]="hide">
                <mat-icon>{{hide ? 'visibility_off' : 'visibility'}}</mat-icon>
            </button>
            @if (form.controls.password.hasError('required')){ <!-- Field level validation -->
                <mat-error>Password is required</mat-error>
            }
            @if (form.controls.password.hasError('minLength')){
                <mat-error>Minimum 6 characters</mat-error>
            }
        </mat-form-field>

        <div class="actions"> <!-- Submit button -->
            <button matButton="filled" type="submit" [disabled]="loading || form.invalid">
                @if (!loading){
                    Sign in 
                }
                @else{ <!-- Swaps what is shown inside the button without adding extra DOM elements -->
                    <mat-progress-spinner diameter="20" mode="indeterminate"></mat-progress-spinner>
                }
            </button>
        </div>

        @if (error){ <!-- Conditional error message area -->
            <div class="error">{{ error }}</div> <!-- Form-level validation -->
        }

    </form>
  </mat-card-content>
</mat-card>